<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ì´ë¯¸ì§€ ì¸ë„¤ì¼ ê·¸ë¦¬ë“œ (PC 6ì—´ / ëª¨ë°”ì¼ 2ì—´)</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ§©</text></svg>">

<style>
/* =========================
   í…Œë§ˆ ë³€ìˆ˜ (ë¼ì´íŠ¸/ë‹¤í¬)
   ========================= */
:root{
  --background-color: #f4f6f9;
  --panel-bg: #ffffff;
  --panel-border: #e0e6ed;
  --text-primary: #2c3e50;
  --text-secondary: #8a95a5;
  --header-bg: #2c3e50;
  --accent-primary: #3498db;
  --accent-primary-dark: #2980b9;
  --accent-secondary: #2ecc71;
  --accent-secondary-dark: #27ae60;
  --input-bg: #ffffff;
  --input-border: #dce1e6;
  --shadow: rgba(44, 62, 80, 0.1);
  --inactive-tab-bg: #5f7a95;

  --font-primary: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, 'Noto Sans KR', sans-serif;
  --font-secondary: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, 'Noto Sans KR', sans-serif;
}

body.dark-mode{
  --background-color: #1c2128;
  --panel-bg: #2d333b;
  --panel-border: #444c56;
  --text-primary: #e6edf3;
  --text-secondary: #909dab;
  --header-bg: #2d333b;
  --accent-primary: #58a6ff;
  --accent-primary-dark: #388bfd;
  --accent-secondary: #34d399;
  --accent-secondary-dark: #10b981;
  --input-bg: #22272e;
  --input-border: #444c56;
  --shadow: rgba(0,0,0,0.4);
  --inactive-tab-bg: #444c56;
}

/* =========================
   ê¸°ë³¸ ë ˆì´ì•„ì›ƒ/íƒ€ì´í¬
   ========================= */
*{ box-sizing: border-box; }
html, body{ height:100%; }
body{
  margin:0;
  font-family: var(--font-secondary);
  background: var(--background-color);
  color: var(--text-primary);
  transition: background-color .25s, color .25s;
}

.container{
  max-width: 1100px;
  margin: 0 auto;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

/* í—¤ë” */
.app-header{
  background: var(--header-bg);
  color: #fff;
  border-radius: 14px;
  padding: 18px 20px 22px;
  position: relative;
  box-shadow: 0 10px 30px var(--shadow);
}
.app-header h1{
  margin: 0 0 8px;
  font-size: 20px;
  font-weight: 700;
  letter-spacing: .2px;
}
.version-info{
  position: absolute;
  right: 16px;
  top: 14px;
  font-size: 12px;
  opacity: .9;
  text-align: right;
}
.theme-toggle{
  position:absolute;
  left: 16px;
  top: 12px;
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding: 8px 12px;
  border-radius: 999px;
  background: var(--inactive-tab-bg);
  color:#fff;
  border: 1px solid transparent;
  cursor: pointer;
  font-weight: 700;
  font-size: 13px;
}
.theme-toggle:hover{ background: var(--accent-primary); }
.theme-toggle .sun{ display:none; }
.theme-toggle .moon{ display:block; }
body.dark-mode .theme-toggle{
  background: var(--input-bg);
  color: var(--text-primary);
  border-color: var(--panel-border);
}
body.dark-mode .theme-toggle:hover{
  border-color: var(--accent-primary);
  color: var(--accent-primary);
}
body.dark-mode .theme-toggle .sun{ display:block; }
body.dark-mode .theme-toggle .moon{ display:none; }

/* íŒ¨ë„ */
.panel{
  background: var(--panel-bg);
  border: 1px solid var(--panel-border);
  border-radius: 14px;
  box-shadow: 0 10px 30px var(--shadow);
  padding: 16px;
}
.panel-title{
  margin: 0 0 12px;
  font-size: 16px;
  font-weight: 800;
}

/* ì…ë ¥ì¤„ */
.controls{
  display:flex;
  gap:10px;
  flex-wrap: wrap;
  align-items: center;
  margin-bottom: 12px;
}
.input-wrapper{
  display:flex;
  align-items:center;
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  border-radius: 8px;
  overflow:hidden;
}
.input-wrapper input[type="file"]{
  padding:10px;
}
.btn{
  display:inline-flex; align-items:center; justify-content:center;
  gap:6px;
  padding:10px 14px;
  font-size:13px; font-weight:800;
  border-radius: 10px;
  border: 1px solid var(--input-border);
  background: #f7f9fb;
  color: var(--text-primary);
  cursor:pointer;
}
.btn:hover{ background:#eef3f8; }
.btn.primary{
  background: var(--accent-secondary);
  border-color: transparent;
  color:#fff;
}
.btn.primary:hover{ background: var(--accent-secondary-dark); }
.btn.danger{
  background:#e74c3c; color:#fff; border-color: transparent;
}
.btn.danger:hover{ background:#c0392b; }
.note{ color: var(--text-secondary); font-size: 12px; }

/* =========================
   ì¸ë„¤ì¼ ê·¸ë¦¬ë“œ
   PC: 6ì—´ / ëª¨ë°”ì¼: 2ì—´
   ========================= */
.thumb-grid{
  display:grid;
  grid-template-columns: repeat(6, 1fr); /* PC 6ì—´ */
  gap: 10px;
  width: 100%;
}
@media (max-width: 768px){
  .thumb-grid{ grid-template-columns: repeat(2, 1fr); } /* ëª¨ë°”ì¼ 2ì—´ */
}

/* ì¸ë„¤ì¼ ì¹´ë“œ */
.thumb{
  position: relative;
  width: 100%;
  aspect-ratio: 4/3;               /* ê· ì¼í•œ ì…€ ë¹„ìœ¨ */
  border: 1px solid var(--panel-border);
  border-radius: 10px;
  overflow: hidden;
  background: var(--input-bg);
  user-select: none;
}
.thumb.dragging{
  opacity: .6;
  outline: 2px dashed var(--accent-primary);
  outline-offset: -2px;
}
.thumb img{
  width:100%; height:100%;
  object-fit: cover;                /* ë³´ê¸° ì¢‹ê²Œ ì¤‘ì•™ í¬ë¡­ */
  display:block; pointer-events:none;
}
.order-badge{
  position:absolute; left:6px; top:6px;
  min-width:22px; height:22px; padding:0 7px;
  border-radius: 999px;
  color:#fff; background: rgba(0,0,0,.55);
  font-size:12px; font-weight:800;
  display:flex; align-items:center; justify-content:center;
  pointer-events:none;
}
.file-name{
  position:absolute; left:0; right:0; bottom:0;
  font-size:11px; color:#fff;
  background: linear-gradient(to top, rgba(0,0,0,.55), rgba(0,0,0,0));
  padding: 16px 8px 6px;
  white-space: nowrap; overflow:hidden; text-overflow: ellipsis;
}
.thumb-actions{
  position:absolute; right:6px; top:6px;
  display:flex; gap:6px;
}
.icon-btn{
  width:26px; height:26px; border-radius:6px;
  background: rgba(0,0,0,.55); color:#fff; border:none;
  display:grid; place-items:center; cursor:pointer;
}
.icon-btn:hover{ background: rgba(0,0,0,.75); }

/* ë“œë¡­ ì˜ì—­ ê°•ì¡° */
.dropzone{
  border: 2px dashed var(--accent-primary);
  border-radius: 10px;
  padding: 14px;
  text-align:center;
  color: var(--text-secondary);
}
.dropzone.dragover{
  background: rgba(52,152,219,.08);
  color: var(--accent-primary);
}

/* í† ìŠ¤íŠ¸ */
#toast{
  position: fixed;
  left: 50%; bottom: 20px; transform: translateX(-50%);
  background: var(--accent-primary);
  color:#fff; padding:10px 14px;
  border-radius: 10px; font-weight:800; font-size: 12px;
  opacity:0; pointer-events:none;
  transition: opacity .2s;
}
#toast.show{ opacity:1; }

/* íˆ´ë°” */
.toolbar{
  display:flex; gap:8px; flex-wrap:wrap;
  align-items:center;
  margin: 10px 0 6px;
}
.sep{ width:1px; height:22px; background: var(--panel-border); }

/* ì ‘ê·¼ì„± í¬ì»¤ìŠ¤ */
:focus-visible{ outline: 2px solid var(--accent-primary); outline-offset: 2px; }
</style>
</head>
<body>
<div class="container">

  <!-- í—¤ë” -->
  <header class="app-header">
    <button id="themeBtn" class="theme-toggle" type="button" aria-label="í…Œë§ˆ ì „í™˜">
      <span class="moon">ğŸŒ™</span>
      <span class="sun">â˜€ï¸</span>
      <span id="themeLabel">ë‹¤í¬ ëª¨ë“œ</span>
    </button>
    <div class="version-info">
      <div>Version: 1.0.0</div>
      <div>Last Updated: 2025-11-02</div>
    </div>
    <h1>ì´ë¯¸ì§€ ì¸ë„¤ì¼ ê·¸ë¦¬ë“œ</h1>
    <div class="note">PC 6ì—´ Â· ëª¨ë°”ì¼ 2ì—´ Â· ê°€ë¡œ ìŠ¤í¬ë¡¤ ì—†ì´ í•œ ëˆˆì— ì •ë ¬</div>
  </header>

  <!-- ì»¨íŠ¸ë¡¤ + ê·¸ë¦¬ë“œ -->
  <section class="panel">
    <h2 class="panel-title">ì´ë¯¸ì§€ ì„ íƒ</h2>

    <!-- ì—…ë¡œë“œ/ë¶™ì—¬ë„£ê¸°/ë“œë˜ê·¸ ì•ˆë‚´ ë° ë²„íŠ¼ -->
    <div class="controls">
      <label class="input-wrapper">
        <input id="fileInput" type="file" accept="image/*" multiple />
      </label>
      <button id="sortAsc" class="btn" type="button">íŒŒì¼ëª… ì˜¤ë¦„ì°¨ìˆœ</button>
      <button id="sortDesc" class="btn" type="button">íŒŒì¼ëª… ë‚´ë¦¼ì°¨ìˆœ</button>
      <span class="sep"></span>
      <button id="clearAll" class="btn danger" type="button">ì „ì²´ ë¹„ìš°ê¸°</button>
      <span class="note">íŒ: ë°”íƒ•í™”ë©´ì—ì„œ ì´ ì°½ìœ¼ë¡œ **ë“œë˜ê·¸ ì•¤ ë“œë¡­**, í˜¹ì€ ì´ë¯¸ì§€ **Ctrl+V ë¶™ì—¬ë„£ê¸°**ë„ ê°€ëŠ¥</span>
    </div>

    <!-- ë“œë˜ê·¸ ë“œë¡­ ê°€ëŠ¥ ë“œë¡­ì¡´ -->
    <div id="dropzone" class="dropzone">ì—¬ê¸°ë¡œ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜, ìœ„ì—ì„œ íŒŒì¼ ì„ íƒ / Ctrl+V ë¡œ ë¶™ì—¬ë„£ê¸°</div>

    <!-- ì¸ë„¤ì¼ ê·¸ë¦¬ë“œ (PC 6ì—´ / ëª¨ë°”ì¼ 2ì—´) -->
    <div id="thumbContainer" class="thumb-grid" aria-live="polite"></div>
  </section>
</div>

<!-- í† ìŠ¤íŠ¸ -->
<div id="toast" role="status" aria-live="polite"></div>

<script>
/* ==============================
   ìœ í‹¸: í† ìŠ¤íŠ¸, íŒŒì¼ëª…, íƒ€ì…ì²´í¬
   ============================== */
const toastEl = document.getElementById('toast');
function showToast(msg, ms=1800){
  toastEl.textContent = msg;
  toastEl.classList.add('show');
  clearTimeout(showToast._t);
  showToast._t = setTimeout(()=>toastEl.classList.remove('show'), ms);
}
function niceName(file){
  return file?.name || '(clipboard)';
}
function isImageFile(f){
  return f && f.type && f.type.startsWith('image/');
}

/* ==============================
   í…Œë§ˆ í† ê¸€
   ============================== */
const themeBtn = document.getElementById('themeBtn');
const themeLabel = document.getElementById('themeLabel');
const THEME_KEY = 'thumbGridTheme';
function applyTheme(mode){
  if(mode==='dark'){ document.body.classList.add('dark-mode'); themeLabel.textContent='ë¼ì´íŠ¸ ëª¨ë“œ'; }
  else{ document.body.classList.remove('dark-mode'); themeLabel.textContent='ë‹¤í¬ ëª¨ë“œ'; }
}
function initTheme(){
  const saved = localStorage.getItem(THEME_KEY);
  const prefersDark = matchMedia('(prefers-color-scheme: dark)').matches;
  applyTheme(saved || (prefersDark ? 'dark' : 'light'));
}
themeBtn.addEventListener('click', ()=>{
  const isDark = document.body.classList.contains('dark-mode');
  const next = isDark ? 'light' : 'dark';
  applyTheme(next);
  localStorage.setItem(THEME_KEY, next);
});
initTheme();

/* ==============================
   ìƒíƒœ: ì´ë¯¸ì§€ ë¦¬ìŠ¤íŠ¸
   ============================== */
const fileInput = document.getElementById('fileInput');
const dropzone = document.getElementById('dropzone');
const grid = document.getElementById('thumbContainer');
const sortAscBtn = document.getElementById('sortAsc');
const sortDescBtn = document.getElementById('sortDesc');
const clearAllBtn = document.getElementById('clearAll');

let items = []; // {id, file, url, name}

/* ==============================
   ë Œë”: ì¸ë„¤ì¼ ê·¸ë¦¬ë“œ
   ============================== */
function render(){
  grid.innerHTML = '';
  items.forEach((it, idx)=>{
    const card = document.createElement('div');
    card.className = 'thumb';
    card.draggable = true;
    card.dataset.id = it.id;

    const img = document.createElement('img');
    img.src = it.url;
    img.alt = it.name;

    const badge = document.createElement('div');
    badge.className = 'order-badge';
    badge.textContent = (idx + 1);

    const name = document.createElement('div');
    name.className = 'file-name';
    name.title = it.name;
    name.textContent = it.name;

    const actions = document.createElement('div');
    actions.className = 'thumb-actions';

    const del = document.createElement('button');
    del.type = 'button';
    del.className = 'icon-btn';
    del.title = 'ì‚­ì œ';
    del.innerHTML = 'âœ•';
    del.addEventListener('click', ()=>{
      removeById(it.id);
    });

    actions.appendChild(del);

    card.appendChild(img);
    card.appendChild(badge);
    card.appendChild(name);
    card.appendChild(actions);

    // DnD ì´ë²¤íŠ¸
    card.addEventListener('dragstart', onDragStart);
    card.addEventListener('dragover', onDragOver);
    card.addEventListener('drop', onDrop);
    card.addEventListener('dragend', onDragEnd);

    grid.appendChild(card);
  });
}

/* ==============================
   ë°ì´í„° ì¡°ì‘
   ============================== */
function addFiles(fileList){
  const arr = Array.from(fileList || []).filter(isImageFile);
  if(arr.length === 0){ showToast('ì´ë¯¸ì§€ íŒŒì¼ì´ ì•„ë‹™ë‹ˆë‹¤.'); return; }

  const start = performance.now();

  const newItems = arr.map((f, i)=>({
    id: crypto.randomUUID(),
    file: f,
    url: URL.createObjectURL(f),
    name: niceName(f)
  }));
  items = items.concat(newItems);
  render();

  const dt = (performance.now() - start).toFixed(1);
  showToast(`${newItems.length}ì¥ ì¶”ê°€ë¨ (${dt}ms)`);
}

function removeById(id){
  const idx = items.findIndex(x=>x.id===id);
  if(idx>=0){
    URL.revokeObjectURL(items[idx].url);
    items.splice(idx,1);
    render();
  }
}

function clearAll(){
  items.forEach(x=>URL.revokeObjectURL(x.url));
  items = [];
  render();
}

/* ==============================
   ì •ë ¬ (íŒŒì¼ëª…)
   ============================== */
function sortByName(direction='asc'){
  items.sort((a,b)=>{
    const A = (a.name||'').toLowerCase();
    const B = (b.name||'').toLowerCase();
    if(A<B) return direction==='asc' ? -1 : 1;
    if(A>B) return direction==='asc' ? 1 : -1;
    return 0;
  });
  render();
}

/* ==============================
   ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì •ë ¬
   ============================== */
let dragId = null;

function onDragStart(e){
  const el = e.currentTarget;
  dragId = el.dataset.id;
  el.classList.add('dragging');
  e.dataTransfer.effectAllowed = 'move';
}

function onDragOver(e){
  e.preventDefault();
  e.dataTransfer.dropEffect = 'move';

  const over = e.currentTarget;
  const draggingIdx = items.findIndex(x=>x.id===dragId);
  const overIdx = items.findIndex(x=>x.id===over.dataset.id);
  if(draggingIdx < 0 || overIdx < 0 || draggingIdx === overIdx) return;

  const rect = over.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const toRightHalf = x > rect.width/2;

  // ë¯¸ë¦¬ë³´ê¸° ì´ë™: ë°°ì—´ì—ì„œ ìš”ì†Œë¥¼ ë¹¼ì„œ ìƒˆ ìœ„ì¹˜ë¡œ ì‚½ì…
  const moving = items.splice(draggingIdx,1)[0];
  let insertAt = overIdx + (toRightHalf ? 1 : 0);
  if(insertAt < 0) insertAt = 0;
  if(insertAt > items.length) insertAt = items.length;
  items.splice(insertAt, 0, moving);
  dragId = moving.id; // ìµœì‹  ì¸ë±ìŠ¤ ìœ ì§€
  render(); // ì¦‰ì‹œ ì¬ë Œë”ë¡œ ìœ„ì¹˜ ë°˜ì˜
}

function onDrop(e){
  e.preventDefault();
}

function onDragEnd(e){
  e.currentTarget.classList.remove('dragging');
  dragId = null;
}

/* ==============================
   ì…ë ¥ ì†ŒìŠ¤: íŒŒì¼/ë“œë˜ê·¸/ë¶™ì—¬ë„£ê¸°
   ============================== */
fileInput.addEventListener('change', (e)=> addFiles(e.target.files));

;['dragenter','dragover','dragleave','drop'].forEach(ev=>{
  dropzone.addEventListener(ev, (e)=>{ e.preventDefault(); e.stopPropagation(); }, false);
});
dropzone.addEventListener('dragover', ()=> dropzone.classList.add('dragover'));
dropzone.addEventListener('dragleave', ()=> dropzone.classList.remove('dragover'));
dropzone.addEventListener('drop', (e)=>{
  dropzone.classList.remove('dragover');
  const dt = e.dataTransfer;
  if(dt?.files?.length) addFiles(dt.files);
});

window.addEventListener('paste', (e)=>{
  const files = [];
  for(const item of e.clipboardData.items){
    if(item.kind==='file'){
      const f = item.getAsFile();
      if(isImageFile(f)) files.push(f);
    }
  }
  if(files.length) addFiles(files);
});

/* ë²„íŠ¼ë“¤ */
sortAscBtn.addEventListener('click', ()=> sortByName('asc'));
sortDescBtn.addEventListener('click', ()=> sortByName('desc'));
clearAllBtn.addEventListener('click', clearAll);
</script>
</body>
</html>
